(this["webpackJsonpsva-catalog-app"]=this["webpackJsonpsva-catalog-app"]||[]).push([[0],{36:function(e,t){},50:function(e,t){},64:function(e,t,s){},93:function(e,t,s){"use strict";s.r(t);var n=s(18),c=s.n(n),r=s(47),i=s.n(r),a=(s(64),s.p+"static/media/picture1.b19ef7e6.png"),l=s.p+"static/media/picture2.f55359b9.png",d=s(3),h=s(4),o=s(12),j=s(13),b=s(48),m=s(49),u=s(54),x=s(8),O=[{name:"chr1",order:1,length:248956422,cumPos:0},{name:"chr2",order:2,length:242193529,cumPos:248956422},{name:"chr3",order:3,length:198295559,cumPos:491149951},{name:"chr4",order:4,length:190214555,cumPos:689445510},{name:"chr5",order:5,length:181538259,cumPos:879660065},{name:"chr6",order:6,length:170805979,cumPos:1061198324},{name:"chr7",order:7,length:159345973,cumPos:1232004303},{name:"chr8",order:8,length:145138636,cumPos:1391350276},{name:"chr9",order:9,length:138394717,cumPos:1536488912},{name:"chr10",order:10,length:133797422,cumPos:1674883629},{name:"chr11",order:11,length:135086622,cumPos:1808681051},{name:"chr12",order:12,length:133275309,cumPos:1943767673},{name:"chr13",order:13,length:114364328,cumPos:2077042982},{name:"chr14",order:14,length:107043718,cumPos:2191407310},{name:"chr15",order:15,length:101991189,cumPos:2298451028},{name:"chr16",order:16,length:90338345,cumPos:2400442217},{name:"chr17",order:17,length:83257441,cumPos:2490780562},{name:"chr18",order:18,length:80373285,cumPos:2574038003},{name:"chr19",order:19,length:58617616,cumPos:2654411288},{name:"chr20",order:20,length:64444167,cumPos:2713028904},{name:"chr21",order:21,length:46709983,cumPos:2777473071},{name:"chr22",order:22,length:50818468,cumPos:2824183054},{name:"chrX",order:23,length:156040895,cumPos:2875001522},{name:"chrY",order:24,length:57227415,cumPos:3031042417}],g=function(e,t){var s=O.filter((function(t){return t.name===e}));return s[0].cumPos+Math.min(t,s[0].length)},f=s(94),p=s(53),v=s.n(p),N=function(e){var t=O.map((function(e){return e.name}));if(e.includes(":")){var s=e.split(":").filter((function(e){return e}));if(1===s.length&&t.includes(s[0])){var n=s[0];return{posAbs:g(n,0)}}if(s.length>1&&t.includes(s[0])&&parseInt(s[1],10)){var c=s[0],r=parseInt(s[1],10);return{posAbs:g(c,r)}}}else if(t.includes(e))return{posAbs:g(e,0)};return null},y=s(0),P=50,k=function(e){Object(o.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).state={showFilter:!1,loading:!0,variants:[],displayedVariants:[],tablePage:0,filter:{},showInsertionTable:!1},n.variants=[],n.loadingVariantsCalled=!1,n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){this.nextPage=this.nextPage.bind(this),this.previousPage=this.previousPage.bind(this),this.toggleFilter=this.toggleFilter.bind(this),this.filterChange=this.filterChange.bind(this),this.toggleDetails=this.toggleDetails.bind(this),this.toggleInsertionTable=this.toggleInsertionTable.bind(this),this.loadVariants()}},{key:"nextPage",value:function(){this.setState((function(e){return{tablePage:e.tablePage+1}}))}},{key:"previousPage",value:function(){this.setState((function(e){return{tablePage:e.tablePage-1}}))}},{key:"toggleFilter",value:function(){this.setState((function(e){return{showFilter:!e.showFilter}}))}},{key:"toggleDetails",value:function(e){e.preventDefault();var t=e.target.dataset.id,s=this.state.displayedVariants;s.forEach((function(e){e.id===t&&(e.showDetails=!e.showDetails)})),this.setState((function(e){return{displayedVariants:s}}))}},{key:"toggleInsertionTable",value:function(e){e.preventDefault(),this.setState((function(e){return{filter:{},displayedVariants:e.variants,showInsertionTable:!e.showInsertionTable}}))}},{key:"filterChange",value:function(e){var t=e.target.dataset.filtertype,s=this.state.filter;s[t]=e.target.value,""===e.target.value&&delete s[t],this.applyFilter(s)}},{key:"applyFilter",value:function(e){var t=this.state.variants;if(void 0!==e.gene&&(t=t.filter((function(t){return t.gene_info.includes(e.gene.toLowerCase())}))),void 0!==e.from){var s=N(e.from);s&&(t=t.filter((function(e){return e.posAbs>=s.posAbs})))}if(void 0!==e.to){var n=N(e.to);n&&(t=t.filter((function(e){return e.posAbs<=n.posAbs})))}this.setState((function(s){return{filter:e,displayedVariants:t}}))}},{key:"loadVariants",value:function(){var e=this;this.loadingVariantsCalled||(this.loadingVariantsCalled=!0,this.vcfFile=new m.a({filehandle:new x.b("https://aveit.s3.amazonaws.com/misc/sva_elements.sorted.vcf.gz"),tbiFilehandle:new x.b("https://aveit.s3.amazonaws.com/misc/sva_elements.sorted.vcf.gz.tbi")}),this.vcfFile.getHeader().then((function(t){var s=new u.a({header:t}),n=[];O.forEach((function(t){var c=e.vcfFile.getLines(t.name,0,t.length,(function(n){var c=s.parseLine(n);e.variants.push(function(e,t){var s=e.INFO,n=g(e.CHROM,+e.POS),c=s.GENE_INFO?s.GENE_INFO[0].toLowerCase():"",r=[];s.GENE_INFO&&s.GENE_INFO[0].split("/").forEach((function(e){var t=e.split(":");if(t.length>1){var s=t[0],n=t[t.length-1];r.push(s+":"+n)}else r.push(t[0].replace("not_gene_region","intergenic"))}));var i=Object(f.a)(".2e")(s.AF[0]);return{id:v()(n).substring(0,4),chrom:e.CHROM,chromOrder:t.order,start:e.POS,end:s.END[0],length:s.SVLEN[0],type:s.SVTYPE[0],info:s,gene_info:c,gene_info_disp:r,posAbs:n,af:i,showDetails:!1}}(c,t))}));n.push(c)})),Promise.all(n).then((function(t){e.setState((function(t){return{loading:!1,variants:e.variants,displayedVariants:e.variants}}))}))})))}},{key:"render",value:function(){var e=this;if(this.state.loading)return Object(y.jsxs)("div",{className:"text-center",children:[Object(y.jsx)(b.a,{color:"#999999",width:"50px",height:"50px"}),Object(y.jsx)("div",{className:"mt-2 small text-muted",children:"Loading variants..."})]});if(this.state.showInsertionTable)return Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{className:"py-4 text-center",children:"Some reported pathogenic SVA insertions"}),Object(y.jsx)("div",{className:"row justify-content-md-center",children:Object(y.jsxs)("div",{className:"col col-lg-8",children:[Object(y.jsx)("button",{className:"btn btn-primary mb-3",onClick:this.toggleInsertionTable,children:"Back to Browser"}),Object(y.jsxs)("div",{className:"",children:[Object(y.jsxs)("table",{className:"table table-striped table-hover",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Related papers"}),Object(y.jsx)("th",{children:"Defected gene"}),Object(y.jsx)("th",{children:"Related disease"})]})}),Object(y.jsxs)("tbody",{children:[Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{children:["Rohrer, Jurg, et al., 1999",Object(y.jsx)("br",{}),"Conley, Mary Ellen, et al. 2005"]}),Object(y.jsx)("td",{children:"BTK"}),Object(y.jsx)("td",{children:"XLA"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{children:["Makino, Satoshi, et al. 2007",Object(y.jsx)("br",{}),"Bragg, D. Cristopher, et al 2017",Object(y.jsx)("br",{}),"Aneichyk, Tatsiana, et al. 2018"]}),Object(y.jsx)("td",{children:"TAF1"}),Object(y.jsx)("td",{children:"X-linked dystonia-parkinsonism"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Nakamura, Yuki, et al. 2015"}),Object(y.jsx)("td",{children:"FIX"}),Object(y.jsx)("td",{children:"Hemophilia B"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Wilund, Kenneth R., et al. 2002"}),Object(y.jsx)("td",{children:"LDRAP1"}),Object(y.jsx)("td",{children:"ARH"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{children:["Hassoun, Hani, et al. 1994",Object(y.jsx)("br",{}),"Ostertag, Eric M., et al. 2003"]}),Object(y.jsx)("td",{children:"SPTA1"}),Object(y.jsx)("td",{children:"HE and HPP"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Stacey, Simon N., et al. 2016"}),Object(y.jsx)("td",{children:"CASP8"}),Object(y.jsx)("td",{children:"Breast Cancer Susceptibility"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Nazaryan\u2010Petersen, Lusine, et al. 2016"}),Object(y.jsx)("td",{children:"A4GNT"}),Object(y.jsx)("td",{children:"Chromothripsis"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Takasu, M., et al. 2007"}),Object(y.jsx)("td",{children:"HLA-A"}),Object(y.jsx)("td",{children:"Leukemia"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"van der Klift, Heleen M., et al. 2012"}),Object(y.jsx)("td",{children:"PMS2"}),Object(y.jsx)("td",{children:"Lynch syndrome"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Kobayashi, Kazuhiro, et al. 1998"}),Object(y.jsx)("td",{children:"FKTN"}),Object(y.jsx)("td",{children:"FCMD"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Akman, Hasan O., et al. 2010"}),Object(y.jsx)("td",{children:"PNPLA2"}),Object(y.jsx)("td",{children:"NLSDM"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Vogt, Julia, et al. 2014 (two patients)"}),Object(y.jsx)("td",{children:"SUZ1P"}),Object(y.jsx)("td",{children:"NF1"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Kherraf, Zine-Eddine, et al. 2018"}),Object(y.jsx)("td",{children:"WDR66"}),Object(y.jsx)("td",{children:"Male infertility"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Staaf, Johan, et al. 2019"}),Object(y.jsx)("td",{children:"BRCA1"}),Object(y.jsx)("td",{children:"Breast cancer"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Kim, Jinkuk, et al. 2019"}),Object(y.jsx)("td",{children:"MFSD8"}),Object(y.jsx)("td",{children:"Batten's disease"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Jones, Kaylie D., et al. 2020"}),Object(y.jsx)("td",{children:"CHM"}),Object(y.jsx)("td",{children:"Choroideremia"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"de la Morena-Barrio, Bel\xe9n, et al. 2020"}),Object(y.jsx)("td",{children:"SERPINC1"}),Object(y.jsx)("td",{children:"Antithrombin deficiency"})]}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Taniguchi-Ikeda, Mariko, et al. 2011"}),Object(y.jsx)("td",{children:"Fukutin"}),Object(y.jsx)("td",{children:"Fukuyama muscular dystrophy"})]})]})]}),Object(y.jsx)("button",{className:"btn btn-primary my-3",onClick:this.toggleInsertionTable,children:"Back to Browser"})]})]})})]});var t=[],s=this.state.displayedVariants.sort((function(e,t){return e.posAbs-t.posAbs}));s.slice(this.state.tablePage*P,(this.state.tablePage+1)*P).forEach((function(s,n){var c=[];if(s.gene_info_disp.forEach((function(e){c.push(Object(y.jsx)("span",{className:"badge bg-light text-muted d-inline-block me-1",children:e}))})),t.push(Object(y.jsxs)("tr",{className:s.showDetails?"table-secondary":"",children:[Object(y.jsx)("td",{children:s.chrom}),Object(y.jsx)("td",{children:Object(f.a)(",.0f")(s.start)}),Object(y.jsx)("td",{children:Object(f.a)(",.0f")(s.end)}),Object(y.jsx)("td",{children:s.length}),Object(y.jsx)("td",{children:s.af}),Object(y.jsx)("td",{children:c}),Object(y.jsx)("td",{children:Object(y.jsx)("a",{href:"#",className:"link-primary","data-id":s.id,onClick:e.toggleDetails,children:"Details"})})]})),s.showDetails){var r=[],i=[];for(var a in s.info)i.push(a);i.forEach((function(e){r.push(Object(y.jsxs)("div",{className:"col-md-4",children:[Object(y.jsxs)("strong",{children:[e,":"]})," ",s.info[e]]}))})),t.push(Object(y.jsx)("tr",{className:"table-light",children:Object(y.jsx)("td",{colSpan:7,children:Object(y.jsx)("div",{className:"row",children:r})})}))}}));var n=[];this.state.tablePage>0&&n.push(Object(y.jsx)("button",{className:"btn btn-primary btn-sm mx-2",onClick:this.previousPage,children:"Previous"})),s.length>P&&(this.state.tablePage+1)*P<=s.length&&n.push(Object(y.jsx)("button",{className:"btn btn-primary btn-sm",onClick:this.nextPage,children:"Next"}));var c="No variants found";return s.length>0&&(c="Displaying variants ".concat(this.state.tablePage*P+1,"-").concat(Math.min((this.state.tablePage+1)*P,s.length)," of ").concat(s.length)),Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{className:"py-4",children:"Browse variants"}),Object(y.jsxs)("div",{className:"d-flex mb-2",children:[Object(y.jsx)("div",{className:"me-auto"}),Object(y.jsx)("button",{className:"btn btn-primary me-auto btn-sm collapse",onClick:this.toggleFilter,children:"Filter"}),Object(y.jsx)("div",{className:"pt-1 mx-2",children:c}),n]}),Object(y.jsxs)("div",{className:"row pb-5",children:[Object(y.jsxs)("div",{className:"col-md-3 col-xl-2",children:[Object(y.jsx)("div",{className:"small pt-1 text-muted",children:"FILTER"}),Object(y.jsxs)("div",{className:"mt-1 p-3 bg-light",children:[Object(y.jsxs)("div",{className:"mb-2",children:[Object(y.jsx)("label",{htmlFor:"filter-from",className:"form-label small fw-bold",children:"From"}),Object(y.jsx)("input",{className:"form-control form-control-sm",id:"filter-from",placeholder:"e.g. chr1:1000000","data-filtertype":"from",onChange:this.filterChange})]}),Object(y.jsxs)("div",{className:"mb-2",children:[Object(y.jsx)("label",{htmlFor:"filter-to",className:"form-label small fw-bold",children:"To"}),Object(y.jsx)("input",{className:"form-control form-control-sm",id:"filter-to",placeholder:"e.g. chr3:20000000","data-filtertype":"to",onChange:this.filterChange})]}),Object(y.jsxs)("div",{className:"mb-2",children:[Object(y.jsx)("label",{htmlFor:"filter-gene",className:"form-label small fw-bold",children:"Gene"}),Object(y.jsx)("input",{className:"form-control form-control-sm",id:"filter-gene","data-filtertype":"gene",placeholder:"e.g. TNFRSF8",onChange:this.filterChange})]})]}),Object(y.jsx)("div",{className:"my-2",children:Object(y.jsx)("a",{href:"#",className:"",onClick:this.toggleInsertionTable,children:"Reported pathogenic SVA insertions"})})]}),Object(y.jsx)("div",{className:"col-md-9 col-xl-10",children:Object(y.jsx)("div",{class:"table-responsive",children:Object(y.jsxs)("table",{className:"table table-hover table-sm",children:[Object(y.jsx)("thead",{className:"sticky-table-header bg-white",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"col",children:"Chrom."}),Object(y.jsx)("th",{scope:"col",children:"Start"}),Object(y.jsx)("th",{scope:"col",children:"End"}),Object(y.jsx)("th",{scope:"col",children:"Length"}),Object(y.jsx)("th",{scope:"col",children:"Allele Frequency"}),Object(y.jsx)("th",{scope:"col",children:"Gene info"}),Object(y.jsx)("th",{scope:"col"})]})}),Object(y.jsx)("tbody",{children:t})]})})})]})]})}}]),s}(c.a.Component);s(92);var F=function(){return Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)("h1",{className:"pt-5 py-4 text-center",children:"Human SVA Retrotransposon Catalog"}),Object(y.jsx)("div",{className:"row py-5",children:Object(y.jsx)("div",{className:"col",children:Object(y.jsxs)("div",{className:"d-flex justify-content-evenly flex-wrap",children:[Object(y.jsx)("img",{src:a,className:"frontpage-img1 d-inline-block",alt:"p1"}),Object(y.jsx)("img",{src:l,className:"frontpage-img2 d-inline-block",alt:"p2"})]})})}),Object(y.jsx)(k,{})]})},C=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,95)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),n(e),c(e),r(e),i(e)}))};i.a.createRoot(document.getElementById("root")).render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(F,{})})),C()}},[[93,1,2]]]);
//# sourceMappingURL=main.4687ddac.chunk.js.map